<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SpotifyPesquisa</title>
  <style>
    body, html {
      margin: 0; padding: 0;
      height: 100%;
      font-family: Arial, sans-serif;
      background-color: white;
      color: black;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    .banner {
      background-color: #1DB954;
      color: white;
      font-weight: bold;
      font-size: 1.8em;
      height: 33.33vh;
      display: flex;
      align-items: center;
      justify-content: center;
      user-select: none;
      flex-shrink: 0;
    }
    .banner.roda-pe {
      height: 33.33vh;
    }
    .total-gain {
      position: absolute;
      top: 15px;
      right: 20px;
      font-size: 1.2em;
      font-weight: bold;
      color: white;
      user-select: none;
    }
    .content {
      flex-grow: 1;
      overflow-y: auto;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      width: 320px;
      padding: 20px;
      text-align: center;
      position: relative;
    }
    #questionImage {
      width: 120px;
      height: 120px;
      border-radius: 12px;
      object-fit: cover;
      margin: 0 auto 20px;
      display: block;
      box-shadow: 0 0 8px rgba(0,0,0,0.15);
    }
    #questionContainer {
      font-weight: bold;
      margin-bottom: 20px;
      font-size: 1.1em;
    }
    .buttons button {
      background-color: #1DB954;
      border: none;
      border-radius: 8px;
      color: white;
      font-weight: bold;
      padding: 10px 15px;
      margin: 6px 8px 12px 8px;
      cursor: pointer;
      font-size: 1em;
      width: 80px;
      transition: background-color 0.2s ease;
    }
    .buttons button:hover {
      background-color: #14833b;
    }
    #submitBtn {
      background-color: #1DB954;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-size: 1.1em;
      font-weight: bold;
      cursor: pointer;
      margin-top: 10px;
      width: 100%;
      transition: background-color 0.3s ease;
    }
    #submitBtn:hover {
      background-color: #14833b;
    }
    #notification {
      margin-top: 20px;
      font-weight: bold;
      font-size: 1.1em;
      color: #1DB954;
      min-height: 24px;
    }
    @media (max-width: 400px) {
      .card {
        width: 90vw;
        padding: 15px;
      }
      #questionImage {
        width: 100px;
        height: 100px;
      }
      .buttons button {
        width: 70px;
        font-size: 0.9em;
        padding: 8px 10px;
      }
      #submitBtn {
        font-size: 1em;
      }
      .banner {
        font-size: 1.4em;
      }
    }
  </style>
</head>
<body>

  <div class="banner topo">
    Spotify
    <div class="total-gain" id="totalGainDisplay">Total: R$ 0</div>
  </div>

  <div class="content">
    <div class="card">
      <img id="questionImage" src="" alt="Foto do artista" />
      <div id="questionContainer"></div>
      <div class="buttons" id="buttonsContainer"></div>
      <button id="submitBtn">Enviar respostas e ganhar</button>
      <div id="notification"></div>
    </div>
  </div>

  <div class="banner roda-pe">Spotify</div>

<script>
  const questions = [
    {
      artist: "Matuê",
      image: "https://i.imgur.com/NlX46dN.jpg",
      text: "Qual faixa etária você acha que mais escuta o cantor Matuê?",
      options: ["-18 anos", "+18 anos", "Não sei"]
    },
    {
      artist: "Ludmilla",
      image: "https://i.imgur.com/QdEjF8d.jpg",
      text: "Você recomendaria Ludmilla para algum parente?",
      options: ["Sim", "Não", "Talvez"]
    },
    {
      artist: "Anitta",
      image: "https://i.imgur.com/IS3cN2I.jpg",
      text: "De 0 a 10, quanto você gosta da Anitta?",
      options: ["Pouco", "Mais ou Menos", "Muito"]
    },
    {
      artist: "Jão",
      image: "https://i.imgur.com/vjHZ8Xd.jpg",
      text: "Você escuta Jão diariamente?",
      options: ["Raramente", "De vez em quando", "Todo dia"]
    },
    {
      artist: "IZA",
      image: "https://i.imgur.com/KgfpQJi.jpg",
      text: "Qual sua música favorita da IZA?",
      options: ["Pesadão", "Dona de Mim", "Ginga"]
    },
    {
      artist: "Djonga",
      image: "https://i.imgur.com/Nsn0zLx.jpg",
      text: "Você considera Djonga um artista influente?",
      options: ["Sim", "Não", "Talvez"]
    },
    {
      artist: "Pabllo Vittar",
      image: "https://i.imgur.com/vv2zEaO.jpg",
      text: "Você recomenda Pabllo Vittar para amigos?",
      options: ["Sim", "Não", "Talvez"]
    }
  ];

  let currentQuestionIndex = 0;
  let totalGain = 0;

  const questionImage = document.getElementById("questionImage");
  const questionContainer = document.getElementById("questionContainer");
  const buttonsContainer = document.getElementById("buttonsContainer");
  const submitBtn = document.getElementById("submitBtn");
  const notification = document.getElementById("notification");
  const totalGainDisplay = document.getElementById("totalGainDisplay");

  function getRandomGain() {
    // Para que o total fique entre 321 e 367, e 7 perguntas,
    // faz um ganho entre ~45 e ~53 por resposta:
    return Math.floor(Math.random() * (53 - 45 + 1)) + 45;
  }

  function loadQuestion(index) {
    const q = questions[index];
    questionImage.src = q.image;
    questionContainer.textContent = `${index + 1}. ${q.text}`;
    buttonsContainer.innerHTML = "";
    notification.textContent = "";
    submitBtn.disabled = true;

    q.options.forEach(option => {
      const btn = document.createElement("button");
      btn.textContent = option;
      btn.addEventListener("click", () => {
        // Remove seleção anterior
        [...buttonsContainer.children].forEach(b => b.style.backgroundColor = "#1DB954");
        btn.style.backgroundColor = "#14833b";
        submitBtn.disabled = false;
        submitBtn.dataset.selected = option;
      });
      buttonsContainer.appendChild(btn);
    });
  }

  submitBtn.addEventListener("click", () => {
    if (!submitBtn.dataset.selected) {
      notification.style.color = "red";
      notification.textContent = "Por favor, selecione uma opção antes de continuar.";
      return;
    }

    const gain = getRandomGain();
    totalGain += gain;
    // limitar totalGain entre 321 e 367:
    if(totalGain > 367) totalGain = 367;
    if(totalGain < 321) totalGain = 321;

    totalGainDisplay.textContent = `Total: R$ ${totalGain}`;
    notification.style.color = "#1DB954";
    notification.textContent = `Você ganhou R$ ${gain} por essa resposta!`;

    currentQuestionIndex++;

    if (currentQuestionIndex < questions.length) {
      setTimeout(() => {
        loadQuestion(currentQuestionIndex);
      }, 1500);
    } else {
      setTimeout(() => {
        notification.textContent = `Pesquisa finalizada! Total ganho: R$ ${totalGain}`;
        buttonsContainer.innerHTML = "";
        submitBtn.style.display = "none";
        questionImage.style.display = "none";
        questionContainer.textContent = "Obrigado por participar da pesquisa!";
      }, 1500);
    }

    submitBtn.dataset.selected = null;
    submitBtn.disabled = true;
  });

  loadQuestion(currentQuestionIndex);
</script>

</body>
</html>